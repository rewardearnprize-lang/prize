<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loading offer...</title>
  <script>
    (async () => {
      const params = new URLSearchParams(window.location.search);
      const offerUrl = params.get("url");
      const subid = params.get("subid");
      const redirect = params.get("redirect");

      if (!offerUrl || !subid) {
        document.body.innerHTML = "<h2 style='color:white'>Missing parameters</h2>";
        return;
      }

      // ðŸ”¹ Ø³Ø¬Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ Ù…Ø­Ù„ÙŠØ§Ù‹ Ø£Ùˆ Ø£Ø±Ø³Ù„Ù‡ Ø¥Ù„Ù‰ Ø³ÙŠØ±ÙØ±Ùƒ Ù„ØªØªØ¨Ø¹Ù‡
      try {
        await fetch(`https://ogads-postback.vercel.app/api/pretrack?key=${subid}`);
      } catch (e) {
        console.warn("Pretrack error:", e);
      }

      // ðŸ”¹ Ø£Ø¶Ù sub1 Ù„Ù„Ù…ÙØªØ§Ø­ ÙÙŠ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¹Ø±Ø¶
      const finalUrl = offerUrl.includes("?")
        ? `${offerUrl}&sub1=${subid}`
        : `${offerUrl}?sub1=${subid}`;

      // ðŸ”¹ Ø§ÙØªØ­ Ø§Ù„Ø¹Ø±Ø¶ ÙÙŠ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯ (ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØªØ§Ø­)
      window.open(finalUrl, "_blank");

      // ðŸ”¹ Ø¨Ø¹Ø¯ 4 Ø«ÙˆØ§Ù†ÙØŒ Ø£Ø¹Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù…ÙˆÙ‚Ø¹Ùƒ (ØµÙØ­Ø© Ø§Ù„Ù†Ø¬Ø§Ø­)
      setTimeout(() => {
        window.location.href = redirect || "https://prize-xi.vercel.app/";
      }, 4000);
    })();
  </script>
</head>
<body style="background:black; color:white; display:flex; align-items:center; justify-content:center; height:100vh; font-family:sans-serif;">
  <h2>Preparing your offer...</h2>
</body>
</html>
